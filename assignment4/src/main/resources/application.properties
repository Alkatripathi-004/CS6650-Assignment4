spring.application.name=CS66650_Assignment1
logging.level.root=INFO
logging.level.com.example.chatserver=DEBUG
logging.level.org.springframework.web.socket=DEBUG
spring.rabbitmq.host=172.31.29.154
spring.rabbitmq.port=5672
spring.rabbitmq.username=alka
spring.rabbitmq.password=alka
spring.rabbitmq.virtual-host=/
spring.rabbitmq.ssl.enabled=false

# Enable publisher retries
spring.rabbitmq.template.retry.enabled=true
spring.rabbitmq.template.retry.max-attempts=5
spring.rabbitmq.template.retry.initial-interval=1000
spring.rabbitmq.template.retry.multiplier=2.0
chat.rabbitmq.queues=room.1,room.2,room.3,room.4,room.5,room.6,room.7,room.8,room.9,room.10,room.11,room.12,room.13,room.14,room.15,room.16,room.17,room.18,room.19,room.20
chat.consumer.thread-count=40

management.endpoints.web.exposure.include=health,metrics,info

info.app.description=CS6650 Chat Server Instance
info.app.version=1.0.0

# AWS Configuration
aws.dynamodb.region=us-east-1

# Persistence Tuning (Assignment 3 Part 2.1)
# Configurable batch size and flush interval
chat.db.batch-size=2500
chat.db.flush-interval-ms=200

# Database Writer Thread Pool (Assignment 3 Part 2.2)
spring.task.execution.pool.core-size=10
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=40000

# Resilience 4j Circuit Breaker (Assignment 3 Part 2.2 - Error Recovery)
resilience4j.circuitbreaker.instances.dynamoDB.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.dynamoDB.failureRateThreshold=50
resilience4j.circuitbreaker.instances.dynamoDB.minimumNumberOfCalls=10
resilience4j.circuitbreaker.instances.dynamoDB.slidingWindowSize=10
resilience4j.circuitbreaker.instances.dynamoDB.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.dynamoDB.permittedNumberOfCallsInHalfOpenState=3

# Resilience4j Retry
resilience4j.retry.instances.dynamoDB.maxAttempts=3
resilience4j.retry.instances.dynamoDB.waitDuration=100ms
resilience4j.retry.instances.dynamoDB.enableExponentialBackoff=true
resilience4j.retry.instances.dynamoDB.exponentialBackoffMultiplier=2